model Post {
  id      String      @id @default(uuid())
  type    PostType
  content String
  privacy PostPrivacy

  authorId String
  author   User   @relation(fields: [authorId], references: [id])

  groupId String?
  group   Group?  @relation(fields: [groupId], references: [id])

  attachments PostAttachment[]
  entities    PostEntity[]
  shares      PostShare[]

  feelingsType  String?
  feelingsText  String?
  feelingsEmoji String?

  isDeleted Boolean @default(false)

  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  comments  Comment[]
  reactions Reaction[]
}

model PostAttachment {
  id    String @id @default(uuid())
  url   String
  pubId String

  postId String
  post   Post   @relation(fields: [postId], references: [id], onDelete: Cascade)
}

model PostShare {
  id String @id @default(uuid())

  postId String
  userId String

  post Post @relation(fields: [postId], references: [id], onDelete: Cascade)
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([postId, userId])
}

enum PostType {
  TEXT
  IMAGE
  VIDEO
  SHARED
}

enum PostPrivacy {
  PUBLIC
  FRIENDS
  PRIVATE
}
